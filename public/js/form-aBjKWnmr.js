var w=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var V=(t,s,a)=>s in t?w(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,A=(t,s)=>{for(var a in s||(s={}))x.call(s,a)&&V(t,a,s[a]);if(h)for(var a of h(s))C.call(s,a)&&V(t,a,s[a]);return t};var b=(t,s,a)=>new Promise((r,n)=>{var v=e=>{try{c(a.next(e))}catch(o){n(o)}},l=e=>{try{c(a.throw(e))}catch(o){n(o)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(v,l);c((a=a.apply(t,s)).next())});import{u as D}from"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{f as k,u as B,a as F,s as S}from"./index-DGgvaZdm.js";import{h as y,b as _,u as g,cK as K,j as L,n as M,k as N,a6 as R,z as U}from"../jse/index-index-BUCZBWdu.js";import{u as j}from"./use-modal-BGLiGhJB.js";import{aK as z}from"./bootstrap-DBsnWor2.js";import"./component-map-Dg1YW3q5.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";const I={class:"common-form"},P=y({__name:"form",setup(t,{expose:s}){const a=_(),r=_(!1),n=_(),[v,l]=D(A({showDefaultActions:!1},k)),[c,e]=j({draggable:!0,onOpenChange(o){var i,u,m,d,f;r.value=(u=(i=e.getData())==null?void 0:i.isUpdate)!=null?u:!1,a.value=o?((m=e.getData())==null?void 0:m.record)||{}:{},n.value=o?(d=e.getData())==null?void 0:d.gridApi:null,o&&r.value?S((f=a.value)==null?void 0:f.id).then(p=>{l.setValues(p)}):l.setValues(a.value)},onConfirm(){l.validate().then(o=>b(this,null,function*(){var i,u;if(o.valid){const m=yield l.getValues();e.setState({loading:!0,confirmLoading:!0});const d=(i=a.value)!=null&&i.id?B:F,f=g(r)?[(u=a.value)==null?void 0:u.id,m]:[m];d(...f).then(()=>{var p;K.success("保存成功"),(p=n.value)==null||p.reload(),e.close()}).finally(()=>{e.setState({loading:!1,confirmLoading:!1})})}}))}});return s(e),(o,i)=>(M(),L(g(c),{title:r.value?"编辑角色":"新增角色",class:"w-[50%]"},{default:N(()=>[R("div",I,[U(g(v))])]),_:1},8,["title"]))}}),Z=z(P,[["__scopeId","data-v-c5076475"]]);export{Z as default};
