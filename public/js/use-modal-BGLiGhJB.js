var Ke=Object.defineProperty,Ue=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var re=(s,o,t)=>o in s?Ke(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,m=(s,o)=>{for(var t in o||(o={}))ye.call(o,t)&&re(s,t,o[t]);if(Z)for(var t of Z(o))ve.call(o,t)&&re(s,t,o[t]);return s},E=(s,o)=>Ue(s,We(o));var N=(s,o)=>{var t={};for(var n in s)ye.call(s,n)&&o.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&Z)for(var n of Z(s))o.indexOf(n)<0&&ve.call(s,n)&&(t[n]=s[n]);return t};var X=(s,o,t)=>re(s,typeof o!="symbol"?o+"":o,t);var Y=(s,o,t)=>new Promise((n,r)=>{var c=h=>{try{C(t.next(h))}catch(l){r(l)}},u=h=>{try{C(t.throw(h))}catch(l){r(l)}},C=h=>h.done?n(h.value):Promise.resolve(h.value).then(c,u);C((t=t.apply(s,o)).next())});import{h as k,j as y,n as p,u as e,q as Je,v as qe,k as v,l as B,df as Qe,F as Me,V as de,c as I,b as $,z as R,G as w,R as Ze,ah as Ge,c0 as z,c1 as O,x as ce,r as Oe,y as eo,K as oo,Q as to,dg as ie,H as so,cj as no,dh as ao,dd as lo,w as ge,di as ro,a6 as io,Z as j,_ as H,A as Ce,W as ue,ac as ke,cd as co,bZ as uo,J as be}from"../jse/index-index-BUCZBWdu.js";import{d as De,S as Ae,aL as po,aM as fo,aN as mo,aO as ho,O as Se,aP as yo,aQ as vo,aR as go,ax as Co,aS as bo,aT as Bo,a as Be,aw as wo,az as _o}from"./bootstrap-DBsnWor2.js";import{X as xo}from"./x-BAo__qRZ.js";import{V as Mo}from"./loading-BKAGElNW.js";const Oo=De("ExpandIcon",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);const ko=De("ShrinkIcon",[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8",key:"17vawe"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6",key:"chjx8e"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6",key:"lav6yq"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3",key:"1pxi2q"}]]),Do=k({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:o}){const r=Ae(s,o);return(c,u)=>(p(),y(e(po),Je(qe(e(r))),{default:v(()=>[B(c.$slots,"default")]),_:3},16))}}),Ao=["data-dismissable-modal"],So=k({__name:"DialogOverlay",setup(s){Qe();const o=Me("DISMISSABLE_MODAL_ID");return(t,n)=>(p(),de("div",{"data-dismissable-modal":e(o),class:"bg-overlay z-popup inset-0"},null,8,Ao))}}),$o=k({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},appendTo:{default:"body"},class:{},closeClass:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},showClose:{type:Boolean,default:!0},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{expose:o,emit:t}){const n=s,r=t,c=I(()=>{const D=n,{class:i,modal:d,open:b,showClose:_}=D;return N(D,["class","modal","open","showClose"])});function u(){return n.appendTo==="body"||n.appendTo===document.body||!n.appendTo}const C=I(()=>u()?"fixed":"absolute"),h=Ae(c,r),l=$(null);function g(i){var d;i.target===((d=l.value)==null?void 0:d.$el)&&(n.open?r("opened"):r("closed"))}return o({getContentRef:()=>l.value}),(i,d)=>(p(),y(e(fo),{to:i.appendTo},{default:v(()=>[R(Ge,{name:"fade"},{default:v(()=>[i.open&&i.modal?(p(),y(So,{key:0,style:Ze(E(m({},i.zIndex?{zIndex:i.zIndex}:{}),{position:C.value,backdropFilter:i.overlayBlur&&i.overlayBlur>0?`blur(${i.overlayBlur}px)`:"none"})),onClick:d[0]||(d[0]=()=>r("close"))},null,8,["style"])):w("",!0)]),_:1}),R(e(ho),ce({ref_key:"contentRef",ref:l,style:E(m({},i.zIndex?{zIndex:i.zIndex}:{}),{position:C.value}),onAnimationend:g},e(h),{class:e(O)("z-popup bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] w-full p-6 shadow-lg outline-none sm:rounded-xl",n.class)}),{default:v(()=>[B(i.$slots,"default"),i.showClose?(p(),y(e(mo),{key:0,class:z(e(O)("data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-3 top-3 h-6 w-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none",n.closeClass)),onClick:d[1]||(d[1]=()=>r("close"))},{default:v(()=>[R(e(xo),{class:"h-4 w-4"})]),_:1},8,["class"])):w("",!0)]),_:3},16,["style","class"])]),_:3},8,["to"]))}}),we=k({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,t=I(()=>{const u=o,{class:r}=u;return N(u,["class"])}),n=Se(t);return(r,c)=>(p(),y(e(yo),ce(e(n),{class:e(O)("text-muted-foreground text-sm",o.class)}),{default:v(()=>[B(r.$slots,"default")]),_:3},16,["class"]))}}),To=k({__name:"DialogFooter",props:{class:{}},setup(s){const o=s;return(t,n)=>(p(),de("div",{class:z(e(O)("flex flex-row flex-col-reverse justify-end gap-x-2",o.class))},[B(t.$slots,"default")],2))}}),Eo=k({__name:"DialogHeader",props:{class:{}},setup(s){const o=s;return(t,n)=>(p(),de("div",{class:z(e(O)("flex flex-col gap-y-1.5 text-center sm:text-left",o.class))},[B(t.$slots,"default")],2))}}),_e=k({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,t=I(()=>{const u=o,{class:r}=u;return N(u,["class"])}),n=Se(t);return(r,c)=>(p(),y(e(vo),ce(e(n),{class:e(O)("text-lg font-semibold leading-none tracking-tight",o.class)}),{default:v(()=>[B(r.$slots,"default")]),_:3},16,["class"]))}});function zo(s,o,t){const n=Oe({offsetX:0,offsetY:0}),r=$(!1),c=l=>{const g=l.clientX,i=l.clientY;if(!s.value)return;const d=s.value.getBoundingClientRect(),{offsetX:b,offsetY:_}=n,A=d.left,D=d.top,G=d.width,K=d.height,U=document.documentElement,ee=U.clientWidth,oe=U.clientHeight,te=-A+b,se=-D+_,L=ee-A-G+b,ne=oe-D-K+_,W=P=>{let V=b+P.clientX-g,S=_+P.clientY-i;V=Math.min(Math.max(V,te),L),S=Math.min(Math.max(S,se),ne),n.offsetX=V,n.offsetY=S,s.value&&(s.value.style.transform=`translate(${V}px, ${S}px)`,r.value=!0)},J=()=>{r.value=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",J)};document.addEventListener("mousemove",W),document.addEventListener("mouseup",J)},u=()=>{const l=ie(o);l&&s.value&&l.addEventListener("mousedown",c)},C=()=>{const l=ie(o);l&&s.value&&l.removeEventListener("mousedown",c)},h=()=>{n.offsetX=0,n.offsetY=0;const l=ie(s);l&&(l.style.transform="none")};return eo(()=>{oo(()=>{t.value?u():C()})}),to(()=>{C()}),{dragging:r,resetPosition:h,transform:n}}const Io=k({__name:"modal",props:{modalApi:{default:void 0},appendToMain:{type:Boolean,default:!1},bordered:{type:Boolean},cancelText:{},centered:{type:Boolean},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmDisabled:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},draggable:{type:Boolean},footer:{type:Boolean},footerClass:{},fullscreen:{type:Boolean},fullscreenButton:{type:Boolean},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean},title:{},titleTooltip:{},zIndex:{}},setup(s){var Q,he;const o=s,t=go.getComponents(),n=$(),r=$(),c=$(),u=$(),C=$(),h=so();ke("DISMISSABLE_MODAL_ID",h);const{$t:l}=no(),{isMobile:g}=ao(),i=(he=(Q=o.modalApi)==null?void 0:Q.useStore)==null?void 0:he.call(Q),{appendToMain:d,bordered:b,cancelText:_,centered:A,class:D,closable:G,closeOnClickModal:K,closeOnPressEscape:U,confirmDisabled:ee,confirmLoading:oe,confirmText:te,contentClass:se,description:L,draggable:ne,footer:W,footerClass:J,fullscreen:P,fullscreenButton:V,header:S,headerClass:$e,loading:ae,modal:Te,openAutoFocus:Ee,overlayBlur:ze,showCancelButton:Ie,showConfirmButton:Le,submitting:M,title:q,titleTooltip:pe,zIndex:Pe}=lo(o,i),le=I(()=>P.value&&S.value||g.value),fe=I(()=>ne.value&&!le.value&&S.value),{dragging:Ve,transform:Fe}=zo(c,u,fe);ge(()=>{var a;return(a=i==null?void 0:i.value)==null?void 0:a.isOpen},a=>Y(this,null,function*(){if(a){if(yield ue(),!n.value)return;const f=n.value.getContentRef();c.value=f.$el;const{offsetX:F,offsetY:T}=Fe;c.value.style.transform=`translate(${F}px, ${T}px)`}})),ge(()=>[ae.value,M.value],([a,f])=>{(f||a)&&r.value&&r.value.scrollTo({top:0})});function Re(){var a;(a=o.modalApi)==null||a.setState(f=>E(m({},f),{fullscreen:!P.value}))}function Ne(a){(!K.value||M.value)&&(a.preventDefault(),a.stopPropagation())}function Xe(a){(!U.value||M.value)&&a.preventDefault()}function Ye(a){Ee.value||a==null||a.preventDefault()}function je(a){const f=a.target,F=f==null?void 0:f.dataset.dismissableModal;(!K.value||F!==h||M.value)&&(a.preventDefault(),a.stopPropagation())}function me(a){a.preventDefault(),a.stopPropagation()}const He=I(()=>d.value?`#${ro}`:void 0);return(a,f)=>{var F;return p(),y(e(Do),{modal:!1,open:(F=e(i))==null?void 0:F.isOpen,"onUpdate:open":f[4]||(f[4]=()=>{var T;return e(M)||(T=a.modalApi)==null?void 0:T.close()})},{default:v(()=>{var T;return[R(e($o),{ref_key:"contentRef",ref:n,"append-to":He.value,class:z(e(O)("left-0 right-0 top-[10vh] mx-auto flex max-h-[80%] w-[520px] flex-col p-0 sm:rounded-[var(--radius)]",e(D),{"border-border border":e(b),"shadow-3xl":!e(b),"left-0 top-0 size-full max-h-full !translate-x-0 !translate-y-0":le.value,"top-1/2 !-translate-y-1/2":e(A)&&!le.value,"duration-300":!e(Ve)})),modal:e(Te),open:(T=e(i))==null?void 0:T.isOpen,"show-close":e(M)?!1:e(G),"z-index":e(Pe),"overlay-blur":e(ze),"close-class":"top-3",onCloseAutoFocus:me,onClosed:f[2]||(f[2]=()=>{var x;return(x=a.modalApi)==null?void 0:x.onClosed()}),onEscapeKeyDown:Xe,onFocusOutside:me,onInteractOutside:Ne,onOpenAutoFocus:Ye,onOpened:f[3]||(f[3]=()=>{var x;return(x=a.modalApi)==null?void 0:x.onOpened()}),onPointerDownOutside:je},{default:v(()=>[R(e(Eo),{ref_key:"headerRef",ref:u,class:z(e(O)("px-5 py-4",{"border-b":e(b),hidden:!e(S),"cursor-move select-none":fe.value},e($e)))},{default:v(()=>[e(q)?(p(),y(e(_e),{key:0,class:"text-left"},{default:v(()=>[B(a.$slots,"title",{},()=>[j(H(e(q))+" ",1),e(pe)?B(a.$slots,"titleTooltip",{key:0},()=>[R(e(Co),{"trigger-class":"pb-1"},{default:v(()=>[j(H(e(pe)),1)]),_:1})]):w("",!0)])]),_:3})):w("",!0),e(L)?(p(),y(e(we),{key:1},{default:v(()=>[B(a.$slots,"description",{},()=>[j(H(e(L)),1)])]),_:3})):w("",!0),!e(q)||!e(L)?(p(),y(e(bo),{key:2},{default:v(()=>[e(q)?w("",!0):(p(),y(e(_e),{key:0})),e(L)?w("",!0):(p(),y(e(we),{key:1}))]),_:1})):w("",!0)]),_:3},8,["class"]),io("div",{ref_key:"wrapperRef",ref:r,class:z(e(O)("relative min-h-40 flex-1 overflow-y-auto p-3",e(se),{"overflow-hidden":e(ae)||e(M)}))},[e(ae)||e(M)?(p(),y(e(Mo),{key:0,class:"size-full h-auto min-h-full",spinning:""})):w("",!0),B(a.$slots,"default")],2),e(V)?(p(),y(e(Bo),{key:0,class:"hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-10 top-3 hidden size-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none sm:block",onClick:Re},{default:v(()=>[e(P)?(p(),y(e(ko),{key:0,class:"size-3.5"})):(p(),y(e(Oo),{key:1,class:"size-3.5"}))]),_:1})):w("",!0),e(W)?(p(),y(e(To),{key:1,ref_key:"footerRef",ref:C,class:z(e(O)("flex-row items-center justify-end p-2",{"border-t":e(b)},e(J)))},{default:v(()=>[B(a.$slots,"prepend-footer"),B(a.$slots,"footer",{},()=>[e(Ie)?(p(),y(Ce(e(t).DefaultButton||e(Be)),{key:0,variant:"ghost",disabled:e(M),onClick:f[0]||(f[0]=()=>{var x;return(x=a.modalApi)==null?void 0:x.onCancel()})},{default:v(()=>[B(a.$slots,"cancelText",{},()=>[j(H(e(_)||e(l)("cancel")),1)])]),_:3},8,["disabled"])):w("",!0),e(Le)?(p(),y(Ce(e(t).PrimaryButton||e(Be)),{key:1,disabled:e(ee),loading:e(oe)||e(M),onClick:f[1]||(f[1]=()=>{var x;return(x=a.modalApi)==null?void 0:x.onConfirm()})},{default:v(()=>[B(a.$slots,"confirmText",{},()=>[j(H(e(te)||e(l)("confirm")),1)])]),_:3},8,["disabled","loading"])):w("",!0)]),B(a.$slots,"append-footer")]),_:3},8,["class"])):w("",!0)]),_:3},8,["append-to","class","modal","open","show-close","z-index","overlay-blur"])]}),_:3},8,["open"])}}});class Lo{constructor(o={}){X(this,"sharedData",{payload:{}});X(this,"store");X(this,"api");X(this,"state");const i=o,{connectedComponent:t,onBeforeClose:n,onCancel:r,onClosed:c,onConfirm:u,onOpenChange:C,onOpened:h}=i,l=N(i,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),g={bordered:!0,centered:!1,class:"",closeOnClickModal:!0,closeOnPressEscape:!0,confirmDisabled:!1,confirmLoading:!1,contentClass:"",draggable:!1,footer:!0,footerClass:"",fullscreen:!1,fullscreenButton:!0,header:!0,headerClass:"",isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,showCancelButton:!0,showConfirmButton:!0,title:""};this.store=new wo(m(m({},g),l),{onUpdate:()=>{var b,_,A;const d=this.store.state;(d==null?void 0:d.isOpen)===((b=this.state)==null?void 0:b.isOpen)?this.state=d:(this.state=d,(A=(_=this.api).onOpenChange)==null||A.call(_,!!(d!=null&&d.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:n,onCancel:r,onClosed:c,onConfirm:u,onOpenChange:C,onOpened:h},co(this)}close(){return Y(this,null,function*(){var t,n,r;((r=yield(n=(t=this.api).onBeforeClose)==null?void 0:n.call(t))!=null?r:!0)&&this.store.setState(c=>E(m({},c),{isOpen:!1,submitting:!1}))})}getData(){var o,t;return(t=(o=this.sharedData)==null?void 0:o.payload)!=null?t:{}}lock(o=!0){return this.setState({submitting:o})}onCancel(){var o,t;this.api.onCancel?(t=(o=this.api).onCancel)==null||t.call(o):this.close()}onClosed(){var o,t;this.state.isOpen||(t=(o=this.api).onClosed)==null||t.call(o)}onConfirm(){var o,t;(t=(o=this.api).onConfirm)==null||t.call(o)}onOpened(){var o,t;this.state.isOpen&&((t=(o=this.api).onOpened)==null||t.call(o))}open(){this.store.setState(o=>E(m({},o),{isOpen:!0}))}setData(o){return this.sharedData.payload=o,this}setState(o){return uo(o)?this.store.setState(o):this.store.setState(t=>m(m({},t),o)),this}}const xe=Symbol("VBEN_MODAL_INJECT"),Po={};function jo(s={}){var h;const{connectedComponent:o}=s;if(o){const l=Oe({}),g=$(!0);return[k((d,{attrs:b,slots:_})=>(ke(xe,{extendApi(D){Object.setPrototypeOf(l,D)},options:s,reCreateModal(){return Y(this,null,function*(){g.value=!1,yield ue(),g.value=!0})}}),Vo(l,m(m(m({},d),b),_)),()=>be(g.value?o:"div",m(m({},d),b),_)),{inheritAttrs:!1,name:"VbenParentModal"}),l]}const t=Me(xe,{}),n=m(m(m({},Po),t.options),s);n.onOpenChange=l=>{var g,i,d;(g=s.onOpenChange)==null||g.call(s,l),(d=(i=t.options)==null?void 0:i.onOpenChange)==null||d.call(i,l)};const r=n.onClosed;n.onClosed=()=>{var l;r==null||r(),n.destroyOnClose&&((l=t.reCreateModal)==null||l.call(t))};const c=new Lo(n),u=c;u.useStore=l=>_o(c.store,l);const C=k((l,{attrs:g,slots:i})=>()=>be(Io,E(m(m({},l),g),{modalApi:u}),i),{inheritAttrs:!1,name:"VbenModal"});return(h=t.extendApi)==null||h.call(t,u),[C,u]}function Vo(s,o){return Y(this,null,function*(){var r;if(!o||Object.keys(o).length===0)return;yield ue();const t=(r=s==null?void 0:s.store)==null?void 0:r.state;if(!t)return;const n=new Set(Object.keys(t));for(const c of Object.keys(o))n.has(c)&&!["class"].includes(c)&&console.warn(`[Vben Modal]: When 'connectedComponent' exists, do not set props or slots '${c}', which will increase complexity. If you need to modify the props of Modal, please use useVbenModal or api.`)})}export{jo as u};
