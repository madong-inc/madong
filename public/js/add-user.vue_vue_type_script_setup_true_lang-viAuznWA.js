var I=Object.defineProperty,y=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var _=(r,o,e)=>o in r?I(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,g=(r,o)=>{for(var e in o||(o={}))K.call(o,e)&&_(r,e,o[e]);if(h)for(var e of h(o))A.call(o,e)&&_(r,e,o[e]);return r},b=(r,o)=>y(r,E(o));var C=(r,o,e)=>new Promise((p,i)=>{var u=t=>{try{c(e.next(t))}catch(n){i(n)}},d=t=>{try{c(e.throw(t))}catch(n){i(n)}},c=t=>t.done?p(t.value):Promise.resolve(t.value).then(u,d);c((e=e.apply(r,o)).next())});import"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{s as V,u as z}from"./rbac-DZTRpzt1.js";import{h as D,b as f,cK as L,V as N,n as P,z as x,u as v,k}from"../jse/index-index-BUCZBWdu.js";import{u as R}from"./use-vxe-grid-CxZE6Hzc.js";import{u as G}from"./use-modal-BGLiGhJB.js";const U=D({__name:"add-user",setup(r,{expose:o}){const e=f(),p=f(!1),i=f(),u={collapsed:!0,commonConfig:{labelWidth:60},schema:[{component:"Input",fieldName:"LIKE_user_name",label:"用户名",componentProps:{placeholder:"请输入用户名",allowClear:!0}},{component:"Input",fieldName:"LIKE_real_name",label:"姓名",componentProps:{placeholder:"请输入姓名",allowClear:!0}},{component:"Input",fieldName:"LIKE_mobile_phone",label:"手机号码",componentProps:{placeholder:"请输入手机号码",allowClear:!0}}]},d={columns:[{type:"checkbox",width:60},{field:"user_name",title:"用户名"},{field:"real_name",title:"姓名"},{field:"mobile_phone",title:"手机号码"}],toolbarConfig:{refresh:!0,print:!1,export:!1,zoom:!0,slots:{},custom:{icon:"vxe-icon-menu"}},height:"500",keepSource:!0,columnConfig:{resizable:!0},pagerConfig:{},proxyConfig:{ajax:{query:(s,H)=>C(this,[s,H],function*({page:a},l){return yield z(b(g({page:a.currentPage,limit:a.pageSize},l),{role_id:e.value.id}))})}}},c={checkboxChange(a){p.value=a.records.length>0}},[t,n]=R({formOptions:u,gridOptions:d,gridEvents:c}),[w,m]=G({onOpenChange(a){var l,s;e.value=a?((l=m.getData())==null?void 0:l.record)||{}:{},i.value=a?(s=m.getData())==null?void 0:s.gridApi:null},onConfirm(){const l=n.grid.getCheckboxRecords().map(s=>s.id).map(s=>({user_id:s,role_id:e.value.id}));V(l).then(()=>{L.success("添加成功"),n.reload(),i.value.reload()})}});return o(m),(a,l)=>(P(),N("div",null,[x(v(w),{class:"w-[60%]",title:"添加用户"},{default:k(()=>[x(v(t),null,{"toolbar-tools":k(()=>l[0]||(l[0]=[])),_:1})]),_:1})]))}});export{U as _};
