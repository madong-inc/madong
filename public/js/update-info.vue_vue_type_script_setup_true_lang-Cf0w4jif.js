var b=Object.defineProperty;var u=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var i=(n,o,e)=>o in n?b(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,c=(n,o)=>{for(var e in o||(o={}))h.call(o,e)&&i(n,e,o[e]);if(u)for(var e of u(o))I.call(o,e)&&i(n,e,o[e]);return n};var d=(n,o,e)=>new Promise((r,l)=>{var p=a=>{try{s(e.next(a))}catch(m){l(m)}},t=a=>{try{s(e.throw(a))}catch(m){l(m)}},s=a=>a.done?r(a.value):Promise.resolve(a.value).then(p,t);s((e=e.apply(n,o)).next())});import{u as _}from"./form-CnpKYFzH.js";import{a as C}from"./user-Cu6cmzRD.js";import{B as v}from"./bootstrap-DBsnWor2.js";import{h as B,bP as P,b as g,J as f,cK as y,y as N,j as w,n as k,u as x}from"../jse/index-index-BUCZBWdu.js";const D=B({__name:"update-info",setup(n){const o=P(),e=g(!1),[r,l]=_({wrapperClass:"grid-cols-1 w-[50%]",commonConfig:{formItemClass:"col-span-1",labelWidth:60},showDefaultActions:!1,submitButtonOptions:{content:"更新信息"},resetButtonOptions:{show:!1},schema:[{fieldName:"user_name",label:"用户名",component:"Input",componentProps:{placeholder:"请输入姓名"},dependencies:{triggerFields:["type"],disabled:t=>!0},formItemClass:"col-span-1",rules:"required"},{fieldName:"real_name",label:"姓名",component:"Input",componentProps:{placeholder:"请输入姓名"},formItemClass:"col-span-1",rules:"required"},{fieldName:"sex",label:"性别",component:"ApiDict",defaultValue:3,componentProps:{placeholder:"请选择性别",code:"sex",isBtn:!0,renderType:"RadioGroup"},formItemClass:"col-span-1",rules:"required"},{fieldName:"nick_name",label:"昵称",component:"Input",componentProps:{placeholder:"请输入昵称"},formItemClass:"col-span-1"},{fieldName:"email",label:"邮箱",component:"Input",componentProps:{placeholder:"请输入邮箱"},formItemClass:"col-span-1"},{fieldName:"mobile_phone",label:"电话",component:"Input",componentProps:{placeholder:"请输入电话"},formItemClass:"col-span-1"},{fieldName:"btn",label:"",component:()=>f("div",{},f(v,{type:"primary",onClick:p.bind(null),loading:e.value},{default(){return"更新信息"}})),componentProps:{},formItemClass:"col-span-1"}]}),p=()=>{l.validate().then(t=>d(this,null,function*(){if(t.valid){const s=yield l.getValues();e.value=!0,C(s).then(()=>{y.success("保存成功"),o.setUserInfo(c(c({},o.userInfo),s))}).finally(()=>{e.value=!1})}}))};return N(()=>{l.setValues(o.userInfo||{})}),(t,s)=>(k(),w(x(r)))}});export{D as _};
