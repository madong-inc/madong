var R=Object.defineProperty,S=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var y=(n,o,e)=>o in n?R(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,p=(n,o)=>{for(var e in o||(o={}))A.call(o,e)&&y(n,e,o[e]);if(x)for(var e of x(o))B.call(o,e)&&y(n,e,o[e]);return n},f=(n,o)=>S(n,z(o));var C=(n,o,e)=>new Promise((b,u)=>{var g=i=>{try{s(e.next(i))}catch(d){u(d)}},h=i=>{try{s(e.throw(i))}catch(d){u(d)}},s=i=>i.done?b(i.value):Promise.resolve(i.value).then(g,h);s((e=e.apply(n,o)).next())});import"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{g as k,D as F,r as O,d as T,s as V,l as N}from"./detail-GVMfzCwU.js";import{_ as v}from"./table-action.vue_vue_type_script_setup_true_lang-Bo6k7XMX.js";import{B as j,a3 as G}from"./bootstrap-DBsnWor2.js";import{_ as $}from"./page.vue_vue_type_script_setup_true_lang-9XYPEXDE.js";import{h as q,b as D,j as E,n as I,k as r,z as l,u as c,Z as K,cK as w}from"../jse/index-index-BUCZBWdu.js";import{u as P}from"./use-vxe-grid-CxZE6Hzc.js";import"./component-map-Dg1YW3q5.js";import"./description.vue_vue_type_script_setup_true_lang-CrOvFWHr.js";import"./index-BWzmO9nj.js";import"./use-modal-BGLiGhJB.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";import"./index-1NUgD4WV.js";import"./Dropdown-G0jIiXp0.js";const re=q({__name:"index",setup(n){const o=D(!1),e=D(),b=f(p({},V),{collapsed:!0}),u=f(p({},k),{toolbarConfig:f(p({},k.toolbarConfig),{slots:{buttons:"toolbar-buttons"},custom:{icon:"vxe-icon-menu"}}),height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(m,de)=>C(this,[m,de],function*({page:t},a){return yield N(p({page:t.currentPage,limit:t.pageSize},a))})}}}),g={checkboxChange(){const t=s.grid.getCheckboxRecords();o.value=t.length>0},checkboxAll(){const t=s.grid.getCheckboxRecords();o.value=t.length>0}},[h,s]=P({formOptions:b,gridOptions:u,gridEvents:g}),i=t=>{e.value.setData({record:t}),e.value.open()},d=t=>{O(t.id,{}).then(()=>{w.success("恢复成功"),s.reload()})},_=t=>{let a=[];t?a.push(t.id):a=s.grid.getCheckboxRecords().map(m=>m.id),T(0,{data:a!=null?a:[]}).then(()=>{w.success("删除成功"),s.reload()})};return(t,a)=>(I(),E(c($),{"auto-content-height":""},{default:r(()=>[l(c(h),null,{"toolbar-buttons":r(()=>[l(c(v),{actions:[],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",ifShow:o.value,auth:["admin","system:post:remove"],popConfirm:{title:"确定永久删除吗？",confirm:_.bind(null,!1)}}]},{more:r(()=>[l(c(j),{style:{"margin-left":"8px"}},{default:r(()=>[a[0]||(a[0]=K(" 批量操作 ")),l(c(G))]),_:1})]),_:1},8,["drop-down-actions"])]),"toolbar-tools":r(()=>a[1]||(a[1]=[])),ACTION:r(({row:m})=>[l(c(v),{actions:[{label:"详情",type:"link",size:"small",auth:["admin","system:recycle_bin:detail"],onClick:i.bind(null,m)},{label:"还原",type:"link",size:"small",auth:["admin","system:recycle_bin:recover"],onClick:d.bind(null,m)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["admin","system:recycle_bin:remove"],popConfirm:{title:"确定永久删除吗？",confirm:_.bind(null,m)}}]},null,8,["actions","drop-down-actions"])]),_:1}),l(F,{ref_key:"detailFormRef",ref:e},null,512)]),_:1}))}});export{re as default};
