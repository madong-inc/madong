var T=Object.defineProperty,z=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var C=(o,t,e)=>t in o?T(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,p=(o,t)=>{for(var e in t||(t={}))V.call(t,e)&&C(o,e,t[e]);if(v)for(var e of v(t))$.call(t,e)&&C(o,e,t[e]);return o},y=(o,t)=>z(o,R(t));var _=(o,t,e)=>new Promise((r,l)=>{var g=n=>{try{d(e.next(n))}catch(s){l(s)}},h=n=>{try{d(e.throw(n))}catch(s){l(s)}},d=n=>n.done?r(n.value):Promise.resolve(n.value).then(g,h);d((e=e.apply(o,t)).next())});import"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{d as j,l as w}from"./menu-C7Vk5aXg.js";import{_ as k}from"./table-action.vue_vue_type_script_setup_true_lang-Bo6k7XMX.js";import{a$ as B}from"./bootstrap-DBsnWor2.js";import G from"./detail-DKZdjomG.js";import I from"./form-t0n8daVS.js";import{g as x}from"./index-B3C5Y8qO.js";import{_ as N}from"./page.vue_vue_type_script_setup_true_lang-9XYPEXDE.js";import{h as O,b as c,j as S,n as U,k as f,z as u,u as b,cK as q}from"../jse/index-index-BUCZBWdu.js";import{u as K}from"./use-vxe-grid-CxZE6Hzc.js";import"./component-map-Dg1YW3q5.js";import"./index-1NUgD4WV.js";import"./Dropdown-G0jIiXp0.js";import"./description.vue_vue_type_script_setup_true_lang-CrOvFWHr.js";import"./index-BWzmO9nj.js";import"./use-modal-BGLiGhJB.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";const ue=O({__name:"index",setup(o){const t=c(!1),e=c(),r=c(),l=c(!1),g=y(p({},x),{toolbarConfig:y(p({},x.toolbarConfig),{slots:{buttons:"toolbar-buttons"},custom:{icon:"vxe-icon-menu"}}),height:"auto",keepSource:!0,pagerConfig:{enabled:!1},treeConfig:{transform:!1,rowField:"id",parentField:"pid"},proxyConfig:{ajax:{query:(m,ce)=>_(this,[m,ce],function*({page:a},i){return yield w(p({format:"table_tree",page:a.currentPage,limit:99999},i))})},response:{list:""}}}),h={checkboxChange(a){t.value=a.records.length>0}},[d,n]=K({gridOptions:g,gridEvents:h}),s=a=>{e.value.setData({record:a,isUpdate:!1,gridApi:n}),e.value.open()},D=a=>{e.value.setData({record:a,isUpdate:!0,gridApi:n}),e.value.open()},F=a=>{r.value.setData({record:a}),r.value.open()},A=a=>{const i=[];a&&i.push(...B(a)),j(0,{data:i}).then(()=>{q.success("删除成功"),n.reload()})},E=()=>{l.value?(n.grid.setAllTreeExpand(!1),l.value=!1):(n.grid.setAllTreeExpand(!0),l.value=!0)};return(a,i)=>(U(),S(b(N),{"auto-content-height":""},{default:f(()=>[u(b(d),null,{"toolbar-buttons":f(()=>[u(b(k),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["admin","system:menu:save"],onClick:s.bind(null,{})},{label:l.value?"折叠":"展开",type:"primary",icon:l.value?"ant-design:menu-fold-outlined":"ant-design:menu-unfold-outlined",onClick:E.bind(null)}]},null,8,["actions"])]),"toolbar-tools":f(()=>i[0]||(i[0]=[])),ACTION:f(({row:m})=>[u(b(k),{actions:[{label:"详情",type:"link",size:"small",auth:["admin","system:menu:detail"],onClick:F.bind(null,m)},{label:"编辑",type:"link",size:"small",auth:["admin","system:menu:update"],onClick:D.bind(null,m)}],"drop-down-actions":[{label:"添加下级",type:"link",icon:"ant-design:plus-outlined",size:"small",auth:["admin","system:menu:save"],onClick:s.bind(null,{pid:m.id})},{label:"删除",icon:"ant-design:delete-outlined",auth:["admin","system:menu:remove"],popConfirm:{title:"确定删除吗？",confirm:A.bind(null,m)}}]},null,8,["actions","drop-down-actions"])]),_:1}),u(I,{ref_key:"menuFormRef",ref:e},null,512),u(G,{ref_key:"detailFormRef",ref:r},null,512)]),_:1}))}});export{ue as default};
