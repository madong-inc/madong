var ye=Object.defineProperty,Ce=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var Y=(e,a,t)=>a in e?ye(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,x=(e,a)=>{for(var t in a||(a={}))_e.call(a,t)&&Y(e,t,a[t]);if(X)for(var t of X(a))be.call(a,t)&&Y(e,t,a[t]);return e},F=(e,a)=>Ce(e,ke(a));import{V as xe,Z as Pe,W as he,an as Se,ao as we,ap as Be,aq as Q,B as j,ar as Te,as as Oe,G as De,M as ee,at as Ie,au as P,k as Ne,av as $e}from"./bootstrap-DBsnWor2.js";import{aI as Ae,b0 as ze,h as se,b as je,an as Ve,C as Me,aJ as Ee,c as V,bg as Re,bp as Fe,al as Le,z as c,ai as L,aR as We,ad as y,bl as Ze,aZ as ne,b1 as h,aV as He,aD as oe,V as O,n as d,j as k,G as D,k as g,M as N,a7 as te,u,x as $,bY as le,Z as W,_ as A,l as Ke,a6 as ae,bZ as z,cl as qe}from"../jse/index-index-BUCZBWdu.js";import{D as Ge}from"./index-1NUgD4WV.js";const Je=e=>{const{componentCls:a,iconCls:t,zIndexPopup:i,colorText:f,colorWarning:S,marginXS:m,fontSize:v,fontWeightStrong:b,lineHeight:_}=e;return{[a]:{zIndex:i,[`${a}-inner-content`]:{color:f},[`${a}-message`]:{position:"relative",marginBottom:m,color:f,fontSize:v,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${a}-message-icon ${t}`]:{color:S,fontSize:v,flex:"none",lineHeight:1,paddingTop:(Math.round(v*_)-v)/2},"&-title":{flex:"auto",marginInlineStart:m},"&-title-only":{fontWeight:b}},[`${a}-description`]:{position:"relative",marginInlineStart:v+m,marginBottom:m,color:f,fontSize:v},[`${a}-buttons`]:{textAlign:"end",button:{marginInlineStart:m}}}}},Ue=Ae("Popconfirm",e=>Je(e),e=>{const{zIndexPopupBase:a}=e;return{zIndexPopup:a+60}});var Xe=function(e,a){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&a.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,i=Object.getOwnPropertySymbols(e);f<i.length;f++)a.indexOf(i[f])<0&&Object.prototype.propertyIsEnumerable.call(e,i[f])&&(t[i[f]]=e[i[f]]);return t};const Ye=()=>y(y({},Oe()),{prefixCls:String,content:h(),title:h(),description:h(),okType:He("primary"),disabled:{type:Boolean,default:!1},okText:h(),cancelText:h(),icon:h(),okButtonProps:ne(),cancelButtonProps:ne(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),Qe=se({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:xe(Ye(),y(y({},Be()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(e,a){let{slots:t,emit:i,expose:f,attrs:S}=a;const m=je();Ve(e.visible===void 0),f({getPopupDomNode:()=>{var r,s;return(s=(r=m.value)===null||r===void 0?void 0:r.getPopupDomNode)===null||s===void 0?void 0:s.call(r)}});const[v,b]=Pe(!1,{value:Me(e,"open")}),_=(r,s)=>{e.open===void 0&&b(r),i("update:open",r),i("openChange",r,s)},n=r=>{_(!1,r)},o=r=>{var s;return(s=e.onConfirm)===null||s===void 0?void 0:s.call(e,r)},l=r=>{var s;_(!1,r),(s=e.onCancel)===null||s===void 0||s.call(e,r)},p=r=>{r.keyCode===De.ESC&&v&&_(!1,r)},ie=r=>{const{disabled:s}=e;s||_(r)},{prefixCls:C,getPrefixCls:Z}=Ee("popconfirm",e),ce=V(()=>Z()),ue=V(()=>Z("btn")),[fe]=Ue(C),[H]=Re("Popconfirm",Fe.Popconfirm),de=()=>{var r,s,w,B,T;const{okButtonProps:I,cancelButtonProps:M,title:E=(r=t.title)===null||r===void 0?void 0:r.call(t),description:R=(s=t.description)===null||s===void 0?void 0:s.call(t),cancelText:pe=(w=t.cancel)===null||w===void 0?void 0:w.call(t),okText:me=(B=t.okText)===null||B===void 0?void 0:B.call(t),okType:K,icon:q=((T=t.icon)===null||T===void 0?void 0:T.call(t))||c(Ze,null,null),showCancel:ve=!0}=e,{cancelButton:G,okButton:J}=t,U=y({onClick:l,size:"small"},M),ge=y(y(y({onClick:o},Q(K)),{size:"small"}),I);return c("div",{class:`${C.value}-inner-content`},[c("div",{class:`${C.value}-message`},[q&&c("span",{class:`${C.value}-message-icon`},[q]),c("div",{class:[`${C.value}-message-title`,{[`${C.value}-message-title-only`]:!!R}]},[E])]),R&&c("div",{class:`${C.value}-description`},[R]),c("div",{class:`${C.value}-buttons`},[ve?G?G(U):c(j,U,{default:()=>[pe||H.value.cancelText]}):null,J?J(ge):c(Te,{buttonProps:y(y({size:"small"},Q(K)),I),actionFn:o,close:n,prefixCls:ue.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[me||H.value.okText]})])])};return()=>{var r;const{placement:s,overlayClassName:w,trigger:B="click"}=e,T=Xe(e,["placement","overlayClassName","trigger"]),I=he(T,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),M=Le(C.value,w);return fe(c(we,L(L(L({},I),S),{},{trigger:B,placement:s,onOpenChange:ie,open:v.value,overlayClassName:M,transitionName:We(ce.value,"zoom-big",e.transitionName),ref:m,"data-popover-inject":!0}),{default:()=>[Se(((r=t.default)===null||r===void 0?void 0:r.call(t))||[],{onKeydown:E=>{p(E)}},!1)],content:de}))}}}),re=ze(Qe),en={class:"m-table-action"},nn={class:"ml-1"},rn=se({__name:"table-action",props:{actions:{type:Array,default(){return[]}},dropDownActions:{type:Array,default(){return[]}},divider:{type:Boolean,default:!0}},setup(e){const a=e,t=ee.Item,{hasAccessByCodes:i}=Ie();function f(n){const o=n.ifShow;let l=!0;return qe(o)&&(l=o),z(o)&&(l=o(n)),l}const S=V(()=>(oe(a.actions)||[]).filter(n=>(i(n.auth||[])||(n.auth||[]).length===0)&&f(n)).map(n=>{const{popConfirm:o}=n;return F(x(x({type:"link"},n),o),{onConfirm:o==null?void 0:o.confirm,onCancel:o==null?void 0:o.cancel,enable:!!o})})),m=V(()=>(oe(a.dropDownActions)||[]).filter(n=>(i(n.auth||[])||(n.auth||[]).length===0)&&f(n)).map((n,o)=>{const{label:l,popConfirm:p}=n;return F(x(x({},n),p),{onConfirm:p==null?void 0:p.confirm,onCancel:p==null?void 0:p.cancel,text:l,divider:o<a.dropDownActions.length-1?a.divider:!1})})),v=n=>{const o=n;return delete o.icon,n.confirm&&z(n.confirm)&&(o.onConfirm=n.confirm,delete o.confirm),n.cancel&&z(n.cancel)&&(o.onCancel=n.cancel,delete o.cancel),o},b=n=>{const o=x({type:n.type||"primary"},n);return delete o.icon,o},_=n=>{const o=m.value[n.key];o.onClick&&z(o.onClick)&&o.onClick()};return(n,o)=>(d(),O("div",en,[c(u(Ne),{size:2},{default:g(()=>[(d(!0),O(N,null,te(S.value,(l,p)=>(d(),O(N,{key:p},[l.popConfirm?(d(),k(u(re),$({key:0,ref_for:!0},v(l.popConfirm)),le({default:g(()=>[c(u(j),$({ref_for:!0},b(l)),{default:g(()=>[l.icon?(d(),k(u(P),{key:0,icon:l.icon},null,8,["icon"])):D("",!0),W(" "+A(l.label),1)]),_:2},1040)]),_:2},[l.popConfirm.icon?{name:"icon",fn:g(()=>[c(u(P),{icon:l.popConfirm.icon},null,8,["icon"])]),key:"0"}:void 0]),1040)):(d(),k(u(j),$({key:1,ref_for:!0},b(l),{onClick:l.onClick}),{default:g(()=>[l.icon?(d(),k(u(P),{key:0,icon:l.icon},null,8,["icon"])):D("",!0),W(" "+A(l.label),1)]),_:2},1040,["onClick"]))],64))),128))]),_:1}),m.value.length>0?(d(),k(u(Ge),{key:0,trigger:["hover"]},{overlay:g(()=>[c(u(ee),{onClick:_},{default:g(()=>[(d(!0),O(N,null,te(m.value,(l,p)=>(d(),k(u(t),{key:p},{default:g(()=>[l.popConfirm?(d(),k(u(re),$({key:0,ref_for:!0},v(l.popConfirm)),le({default:g(()=>[ae("div",null,[l.icon?(d(),k(u(P),{key:0,icon:l.icon},null,8,["icon"])):D("",!0),ae("span",nn,A(l.text),1)])]),_:2},[l.popConfirm.icon?{name:"icon",fn:g(()=>[c(u(P),{icon:l.popConfirm.icon},null,8,["icon"])]),key:"0"}:void 0]),1040)):(d(),O(N,{key:1},[l.icon?(d(),k(u(P),{key:0,icon:l.icon},null,8,["icon"])):D("",!0),W(" "+A(l.label),1)],64))]),_:2},1024))),128))]),_:1})]),default:g(()=>[Ke(n.$slots,"more",{},()=>[c(u(j),{size:"small",type:"link"},{default:g(()=>[c(u($e),{class:"icon-more"})]),_:1})])]),_:3})):D("",!0)]))}});export{rn as _};
