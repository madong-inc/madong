var w=Object.defineProperty,x=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var M=(t,e,a)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,u=(t,e)=>{for(var a in e||(e={}))T.call(e,a)&&M(t,a,e[a]);if(O)for(var a of O(e))A.call(e,a)&&M(t,a,e[a]);return t},p=(t,e)=>x(t,K(e));import{de as F,bN as y,h as f,c as v,y as m,w as N,V as S,n as h,_ as b,j as P,b as k}from"../jse/index-index-BUCZBWdu.js";import{aA as $}from"./bootstrap-DBsnWor2.js";const z=t=>y.post("/system/dict/get-by-dict-type",t),q=F({id:"app-dict",state:()=>({cache:{},selectDataCache:{}}),getters:{getDictData(t){return e=>t.cache[e]||[]},getSelectData(t){return(e,a)=>{const c=e+JSON.stringify(a).toString();return t.selectDataCache[c]||[]}}},actions:{requestData(t){return t?new Promise((e,a)=>{let c=this.cache[t];if(c){let n=1e3;const s=()=>{c=this.cache[t],c.length>0?e(c):(n--,n<=0?e(c):setTimeout(()=>{s()},100))};s();return}this.cache[t]=[],z({dict_type:t}).then(n=>{n.length>0?this.cache[t]=n:delete this.cache[t],e(n)}).catch(n=>{a(n),delete this.cache[t]})}):Promise.resolve([])},select(t,e,a){return new Promise((c,n)=>{const s=a+JSON.stringify(e).toString(),o=this.selectDataCache[s];if(o){c(o);return}this.selectDataCache[s]=[],t(e).then(r=>{r.length>0?this.selectDataCache[s]=r:delete this.selectDataCache[s],c(r)}).catch(r=>{n(r),delete this.selectDataCache[s]})})}}}),j=f({__name:"api-select",props:{code:{type:String,default:void 0},data:{type:Object,default(){return{}}},value:{type:[String,Number,Array],default:void 0},split:{type:String,default:","},join:{type:String,default:","},api:{type:[Function,String],default(){return()=>new Promise(t=>{t([])})}},params:{type:Object,default(){return{}}},cacheKey:{type:String,default:""},requestMethod:{type:String,default:"get"}},setup(t){const e=t,a=q(),c=()=>{if(!e.value&&e.value!==0)return[];const r=[];return Array.isArray(e.value)?r.push(...e.value):r.push(...e.value.toString().split(e.split)),r},n=()=>{let r=e.cacheKey;return typeof e.api=="string"&&!r&&(r=e.api),r},s=v(()=>{if(!e.value&&e.value!==0)return"";const r=c(),l=n(),i=a.getSelectData(l,p(u({},e.params),{includeType:2,includeIds:c()})),d=[];return r.forEach(g=>{var D;for(let _=0;_<i.length;_++){if(((D=i[_].value)==null?void 0:D.toString())===(g==null?void 0:g.toString())){d.push(i[_].label);break}_===i.length-1&&d.push(g)}}),d.join(e.join)}),o=()=>{const r=typeof e.api=="string"?d=>y[e.requestMethod](e.api,d):e.api,l=n(),i=e.requestMethod==="get"?{params:p(u({},e.params),{include_type:2,include_ids:c()})}:p(u({},e.params),{include_type:2,include_ids:c()});a.select(r,i,l)};return m(()=>{o()}),N(()=>e.value,()=>{o()}),(r,l)=>(h(),S("div",null,b(s.value),1))}}),B=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"})),E=f({__name:"api-checkbox-group",setup(t){return(e,a)=>(h(),P(j))}}),V=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"})),I=f({__name:"api-dict",props:{code:{type:String,default:void 0},data:{type:Object,default(){return{}}},value:{type:[String,Number,Array],default:void 0},split:{type:String,default:","},join:{type:String,default:","}},setup(t){const e=t,a=q(),c=v(()=>{if(!e.value&&e.value!==0)return"";const n=[];Array.isArray(e.value)?n.push(...e.value):n.push(...e.value.toString().split(e.split));const s=a.getDictData(e.code),o=[];return n.forEach(r=>{var l;for(let i=0;i<s.length;i++){if(((l=s[i].value)==null?void 0:l.toString())===(r==null?void 0:r.toString())){o.push(s[i].label);break}i===s.length-1&&o.push(r)}}),o.join(e.join)});return m(()=>{a.requestData(e.code)}),(n,s)=>(h(),S("div",null,b(c.value),1))}}),J=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),G=f({__name:"api-radio-group",setup(t){return(e,a)=>(h(),P(j))}}),H=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),L=f({__name:"api-tree-select",props:{data:{type:Object,default(){return{}}},value:{type:[String,Number,Array],default:void 0},api:{type:[Function,String],default(){return()=>new Promise(t=>{t([])})}},params:{type:Object,default(){return{}}},cacheKey:{type:String,default:""},requestMethod:{type:String,default:"get"},valueField:{type:String,default:"id"},labelField:{type:String,default:"name"}},setup(t){const e=t,a=k({}),c=v(()=>a.value[e.labelField]||e.value);return m(()=>{const n=typeof e.api=="string"?o=>y[e.requestMethod](e.api,o):e.api,s=e.requestMethod==="get"?{params:p(u({},e.params),{[`${e.valueField}`]:e.value})}:p(u({},e.params),{[`${e.valueField}`]:e.value});n(s).then(o=>{o.length>0&&(a.value=o[0])})}),(n,s)=>(h(),S("div",null,b(c.value),1))}}),Q=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),R=new Map,C=Object.assign({"./components/api-checkbox-group.vue":V,"./components/api-dict.vue":J,"./components/api-radio-group.vue":H,"./components/api-select.vue":B,"./components/api-tree-select.vue":Q});Object.keys(C).forEach(t=>{if(!t.includes("-ignore")){const e=C[t].default||{},a=t.replace("./components/","").replace(".vue","");R.set($(a),e)}});export{R as c};
