var Pe=Object.defineProperty,Ee=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var H=(s,t,o)=>t in s?Pe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,m=(s,t)=>{for(var o in t||(t={}))oe.call(t,o)&&H(s,o,t[o]);if(j)for(var o of j(t))se.call(t,o)&&H(s,o,t[o]);return s},$=(s,t)=>Ee(s,ze(t));var I=(s,t)=>{var o={};for(var a in s)oe.call(s,a)&&t.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&j)for(var a of j(s))t.indexOf(a)<0&&se.call(s,a)&&(o[a]=s[a]);return o};var R=(s,t,o)=>H(s,typeof t!="symbol"?t+"":t,o);var X=(s,t,o)=>new Promise((a,r)=>{var i=w=>{try{C(o.next(w))}catch(c){r(c)}},b=w=>{try{C(o.throw(w))}catch(c){r(c)}},C=w=>w.done?a(w.value):Promise.resolve(w.value).then(i,b);C((o=o.apply(s,t)).next())});import{h as g,c as P,j as p,n as d,u as e,x as W,c1 as O,k as u,V as K,G as _,_ as T,c0 as A,q as ue,v as fe,l as y,df as Re,F as me,b as Q,z as x,R as Ve,ah as Fe,H as Me,cj as Le,dh as Ne,dd as je,w as We,di as Ke,a6 as Z,Z as V,A as ae,ac as he,cd as Ue,bZ as Je,r as He,J as ne,W as ye}from"../jse/index-index-BUCZBWdu.js";import{aU as Xe,j as Ze,S as we,aL as qe,aN as Ge,aM as Qe,aO as Ye,aP as et,aQ as tt,aR as ot,aT as le,ax as st,aS as re,a as ie,aw as at,az as nt}from"./bootstrap-DBsnWor2.js";import{X as de}from"./x-BAo__qRZ.js";import{V as lt}from"./loading-BKAGElNW.js";const rt=g({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{},label:{}},setup(s){const t=s,o=P(()=>{const i=t,{class:a}=i;return I(i,["class"])});return(a,r)=>(d(),p(e(Xe),W(o.value,{class:e(O)("bg-border relative shrink-0",t.orientation==="vertical"?"h-full w-px":"h-px w-full",t.class)}),{default:u(()=>[t.label?(d(),K("span",{key:0,class:A(e(O)("text-muted-foreground bg-background absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center justify-center text-xs",t.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] px-2 py-1"))},T(t.label),3)):_("",!0)]),_:1},16,["class"]))}}),it=Ze("bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),dt=g({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:t}){const r=we(s,t);return(i,b)=>(d(),p(e(qe),ue(fe(e(r))),{default:u(()=>[y(i.$slots,"default")]),_:3},16))}}),ce=g({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(s){const t=s;return(o,a)=>(d(),p(e(Ge),ue(fe(t)),{default:u(()=>[y(o.$slots,"default")]),_:3},16))}}),ct=["data-dismissable-drawer"],pt=g({__name:"SheetOverlay",setup(s){Re();const t=me("DISMISSABLE_DRAWER_ID");return(o,a)=>(d(),K("div",{"data-dismissable-drawer":e(t),class:"bg-overlay z-popup inset-0"},null,8,ct))}}),ut=g({inheritAttrs:!1,__name:"SheetContent",props:{appendTo:{default:"body"},class:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},side:{},zIndex:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{emit:t}){const o=s,a=t,r=P(()=>{const k=o,{class:l,modal:f,open:h,side:D}=k;return I(k,["class","modal","open","side"])});function i(){return o.appendTo==="body"||o.appendTo===document.body||!o.appendTo}const b=P(()=>i()?"fixed":"absolute"),C=we(r,a),w=Q(null);function c(l){var f;l.target===((f=w.value)==null?void 0:f.$el)&&(o.open?a("opened"):a("closed"))}return(l,f)=>(d(),p(e(Qe),{to:l.appendTo},{default:u(()=>[x(Fe,{name:"fade"},{default:u(()=>[l.open&&l.modal?(d(),p(pt,{key:0,style:Ve($(m({},l.zIndex?{zIndex:l.zIndex}:{}),{position:b.value,backdropFilter:l.overlayBlur&&l.overlayBlur>0?`blur(${l.overlayBlur}px)`:"none"}))},null,8,["style"])):_("",!0)]),_:1}),x(e(Ye),W({ref_key:"contentRef",ref:w,class:e(O)("z-popup",e(it)({side:l.side}),o.class),style:$(m({},l.zIndex?{zIndex:l.zIndex}:{}),{position:b.value}),onAnimationend:c},m(m({},e(C)),l.$attrs)),{default:u(()=>[y(l.$slots,"default")]),_:3},16,["class","style"])]),_:3},8,["to"]))}}),q=g({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=P(()=>{const i=t,{class:a}=i;return I(i,["class"])});return(a,r)=>(d(),p(e(et),W({class:e(O)("text-muted-foreground text-sm",t.class)},o.value),{default:u(()=>[y(a.$slots,"default")]),_:3},16,["class"]))}}),ft=g({__name:"SheetFooter",props:{class:{}},setup(s){const t=s;return(o,a)=>(d(),K("div",{class:A(e(O)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[y(o.$slots,"default")],2))}}),mt=g({__name:"SheetHeader",props:{class:{}},setup(s){const t=s;return(o,a)=>(d(),K("div",{class:A(e(O)("flex flex-col text-center sm:text-left",t.class))},[y(o.$slots,"default")],2))}}),G=g({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=P(()=>{const i=t,{class:a}=i;return I(i,["class"])});return(a,r)=>(d(),p(e(tt),W({class:e(O)("text-foreground font-medium",t.class)},o.value),{default:u(()=>[y(a.$slots,"default")]),_:3},16,["class"]))}}),ht={class:"flex items-center"},yt={class:"flex-center"},wt=g({__name:"drawer",props:{drawerApi:{default:void 0},appendToMain:{type:Boolean,default:!1},cancelText:{},class:{},closable:{type:Boolean},closeIconPlacement:{default:"right"},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},title:{},titleTooltip:{},zIndex:{default:1e3}},setup(s){var L,te;const t=s,o=ot.getComponents(),a=Me();he("DISMISSABLE_DRAWER_ID",a);const r=Q(),{$t:i}=Le(),{isMobile:b}=Ne(),C=(te=(L=t.drawerApi)==null?void 0:L.useStore)==null?void 0:te.call(L),{appendToMain:w,cancelText:c,class:l,closable:f,closeOnClickModal:h,closeOnPressEscape:D,confirmLoading:S,confirmText:k,contentClass:U,description:F,footer:_e,footerClass:be,header:ve,headerClass:Ce,loading:J,modal:ge,openAutoFocus:Be,overlayBlur:Oe,placement:E,showCancelButton:xe,showConfirmButton:De,title:M,titleTooltip:Y,zIndex:Se}=je(t,C);We(()=>J.value,n=>{n&&r.value&&r.value.scrollTo({top:0})});function ke(n){h.value||n.preventDefault()}function Ae(n){D.value||n.preventDefault()}function $e(n){const v=n.target,N=v==null?void 0:v.dataset.dismissableDrawer;(!h.value||N!==a)&&n.preventDefault()}function Ie(n){Be.value||n==null||n.preventDefault()}function ee(n){n.preventDefault(),n.stopPropagation()}const Te=P(()=>w.value?`#${Ke}`:void 0);return(n,v)=>{var N;return d(),p(e(dt),{modal:!1,open:(N=e(C))==null?void 0:N.isOpen,"onUpdate:open":v[4]||(v[4]=()=>{var z;return(z=n.drawerApi)==null?void 0:z.close()})},{default:u(()=>{var z;return[x(e(ut),{"append-to":Te.value,class:A(e(O)("flex w-[520px] flex-col",e(l),{"!w-full":e(b)||e(E)==="bottom"||e(E)==="top","max-h-[100vh]":e(E)==="bottom"||e(E)==="top"})),modal:e(ge),open:(z=e(C))==null?void 0:z.isOpen,side:e(E),"z-index":e(Se),"overlay-blur":e(Oe),onCloseAutoFocus:ee,onClosed:v[2]||(v[2]=()=>{var B;return(B=n.drawerApi)==null?void 0:B.onClosed()}),onEscapeKeyDown:Ae,onFocusOutside:ee,onInteractOutside:ke,onOpenAutoFocus:Ie,onOpened:v[3]||(v[3]=()=>{var B;return(B=n.drawerApi)==null?void 0:B.onOpened()}),onPointerDownOutside:$e},{default:u(()=>[e(ve)?(d(),p(e(mt),{key:0,class:A(e(O)("!flex flex-row items-center justify-between border-b px-6 py-5",e(Ce),{"px-4 py-3":e(f),"pl-2":e(f)&&n.closeIconPlacement==="left"}))},{default:u(()=>[Z("div",ht,[e(f)&&n.closeIconPlacement==="left"?(d(),p(e(ce),{key:0,"as-child":"",class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:u(()=>[y(n.$slots,"close-icon",{},()=>[x(e(le),null,{default:u(()=>[x(e(de),{class:"size-4"})]),_:1})])]),_:3})):_("",!0),e(f)&&n.closeIconPlacement==="left"?(d(),p(e(rt),{key:1,class:"ml-1 mr-2 h-8",decorative:"",orientation:"vertical"})):_("",!0),e(M)?(d(),p(e(G),{key:2,class:"text-left"},{default:u(()=>[y(n.$slots,"title",{},()=>[V(T(e(M))+" ",1),e(Y)?(d(),p(e(st),{key:0,"trigger-class":"pb-1"},{default:u(()=>[V(T(e(Y)),1)]),_:1})):_("",!0)])]),_:3})):_("",!0),e(F)?(d(),p(e(q),{key:3,class:"mt-1 text-xs"},{default:u(()=>[y(n.$slots,"description",{},()=>[V(T(e(F)),1)])]),_:3})):_("",!0)]),!e(M)||!e(F)?(d(),p(e(re),{key:0},{default:u(()=>[e(M)?_("",!0):(d(),p(e(G),{key:0})),e(F)?_("",!0):(d(),p(e(q),{key:1}))]),_:1})):_("",!0),Z("div",yt,[y(n.$slots,"extra"),e(f)&&n.closeIconPlacement==="right"?(d(),p(e(ce),{key:0,"as-child":"",class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:u(()=>[y(n.$slots,"close-icon",{},()=>[x(e(le),null,{default:u(()=>[x(e(de),{class:"size-4"})]),_:1})])]),_:3})):_("",!0)])]),_:3},8,["class"])):(d(),p(e(re),{key:1},{default:u(()=>[x(e(G)),x(e(q))]),_:1})),Z("div",{ref_key:"wrapperRef",ref:r,class:A(e(O)("relative flex-1 overflow-y-auto p-3",e(U),{"overflow-hidden":e(J)}))},[e(J)?(d(),p(e(lt),{key:0,class:"size-full",spinning:""})):_("",!0),y(n.$slots,"default")],2),e(_e)?(d(),p(e(ft),{key:2,class:A(e(O)("w-full flex-row items-center justify-end border-t p-2 px-3",e(be)))},{default:u(()=>[y(n.$slots,"prepend-footer"),y(n.$slots,"footer",{},()=>[e(xe)?(d(),p(ae(e(o).DefaultButton||e(ie)),{key:0,variant:"ghost",onClick:v[0]||(v[0]=()=>{var B;return(B=n.drawerApi)==null?void 0:B.onCancel()})},{default:u(()=>[y(n.$slots,"cancelText",{},()=>[V(T(e(c)||e(i)("cancel")),1)])]),_:3})):_("",!0),e(De)?(d(),p(ae(e(o).PrimaryButton||e(ie)),{key:1,loading:e(S),onClick:v[1]||(v[1]=()=>{var B;return(B=n.drawerApi)==null?void 0:B.onConfirm()})},{default:u(()=>[y(n.$slots,"confirmText",{},()=>[V(T(e(k)||e(i)("confirm")),1)])]),_:3},8,["loading"])):_("",!0)]),y(n.$slots,"append-footer")]),_:3},8,["class"])):_("",!0)]),_:3},8,["append-to","class","modal","open","side","z-index","overlay-blur"])]}),_:3},8,["open"])}}});class _t{constructor(t={}){R(this,"sharedData",{payload:{}});R(this,"store");R(this,"api");R(this,"state");const f=t,{connectedComponent:o,onBeforeClose:a,onCancel:r,onClosed:i,onConfirm:b,onOpenChange:C,onOpened:w}=f,c=I(f,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),l={class:"",closable:!0,closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,title:""};this.store=new at(m(m({},l),c),{onUpdate:()=>{var D,S,k;const h=this.store.state;(h==null?void 0:h.isOpen)===((D=this.state)==null?void 0:D.isOpen)?this.state=h:(this.state=h,(k=(S=this.api).onOpenChange)==null||k.call(S,!!(h!=null&&h.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:r,onClosed:i,onConfirm:b,onOpenChange:C,onOpened:w},Ue(this)}close(){var o,a,r;((r=(a=(o=this.api).onBeforeClose)==null?void 0:a.call(o))!=null?r:!0)&&this.store.setState(i=>$(m({},i),{isOpen:!1}))}getData(){var t,o;return(o=(t=this.sharedData)==null?void 0:t.payload)!=null?o:{}}onCancel(){var t,o;this.api.onCancel?(o=(t=this.api).onCancel)==null||o.call(t):this.close()}onClosed(){var t,o;this.state.isOpen||(o=(t=this.api).onClosed)==null||o.call(t)}onConfirm(){var t,o;(o=(t=this.api).onConfirm)==null||o.call(t)}onOpened(){var t,o;this.state.isOpen&&((o=(t=this.api).onOpened)==null||o.call(t))}open(){this.store.setState(t=>$(m({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return Je(t)?this.store.setState(t):this.store.setState(o=>m(m({},o),t)),this}}const pe=Symbol("VBEN_DRAWER_INJECT"),bt={};function Dt(s={}){var w;const{connectedComponent:t}=s;if(t){const c=He({}),l=Q(!0);return[g((h,{attrs:D,slots:S})=>(he(pe,{extendApi(U){Object.setPrototypeOf(c,U)},options:s,reCreateDrawer(){return X(this,null,function*(){l.value=!1,yield ye(),l.value=!0})}}),vt(c,m(m(m({},h),D),S)),()=>ne(l.value?t:"div",m(m({},h),D),S)),{inheritAttrs:!1,name:"VbenParentDrawer"}),c]}const o=me(pe,{}),a=m(m(m({},bt),o.options),s);a.onOpenChange=c=>{var l,f,h;(l=s.onOpenChange)==null||l.call(s,c),(h=(f=o.options)==null?void 0:f.onOpenChange)==null||h.call(f,c)};const r=a.onClosed;a.onClosed=()=>{var c;r==null||r(),a.destroyOnClose&&((c=o.reCreateDrawer)==null||c.call(o))};const i=new _t(a),b=i;b.useStore=c=>nt(i.store,c);const C=g((c,{attrs:l,slots:f})=>()=>ne(wt,$(m(m({},c),l),{drawerApi:b}),f),{inheritAttrs:!1,name:"VbenDrawer"});return(w=o.extendApi)==null||w.call(o,b),[C,b]}function vt(s,t){return X(this,null,function*(){var r;if(!t||Object.keys(t).length===0)return;yield ye();const o=(r=s==null?void 0:s.store)==null?void 0:r.state;if(!o)return;const a=new Set(Object.keys(o));for(const i of Object.keys(t))a.has(i)&&!["class"].includes(i)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${i}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{Dt as u};
