var v=Object.defineProperty;var f=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var _=(a,e,o)=>e in a?v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,b=(a,e)=>{for(var o in e||(e={}))C.call(e,o)&&_(a,o,e[o]);if(f)for(var o of f(e))x.call(e,o)&&_(a,o,e[o]);return a};var r=(a,e,o)=>new Promise((s,i)=>{var m=t=>{try{n(o.next(t))}catch(l){i(l)}},c=t=>{try{n(o.throw(t))}catch(l){i(l)}},n=t=>t.done?s(t.value):Promise.resolve(t.value).then(m,c);n((o=o.apply(a,e)).next())});import{u as y}from"./form-CnpKYFzH.js";import{_ as I}from"./upload-setting-drawer.vue_vue_type_script_setup_true_lang-DaIegbQ6.js";import{h as k,J as u,dk as B,cK as N,dl as V,y as D,j as P,n as S,k as R,z as w,u as d}from"../jse/index-index-BUCZBWdu.js";import{t as q}from"./index-D2w77Msk.js";import{B as g}from"./bootstrap-DBsnWor2.js";import{_ as z}from"./page.vue_vue_type_script_setup_true_lang-9XYPEXDE.js";import{u as A}from"./use-drawer-JrzCmswA.js";import"./vxe-table-DN_3U_z_.js";import"./component-map-Dg1YW3q5.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";const T=k({__name:"upload-setting",setup(a){const e={mode:"上传模式",single_limit:"上传大小",total_limit:"文件限制",nums:"数量限制",exclude:"不允许文件类型"},[o,s]=y({handleSubmit:c,layout:"horizontal",wrapperClass:"grid-cols-1 md:grid-cols-1 lg:grid-cols-1",commonConfig:{labelClass:"mr-5"},resetButtonOptions:{show:!1},submitButtonOptions:{show:!1},schema:[{fieldName:"mode",label:e.mode,component:"RadioGroup",defaultValue:"local",componentProps:{options:[{label:"私有云(本地)",value:"local"},{label:"阿里云",value:"oss"},{label:"腾讯云",value:"cos"},{label:"七牛云",value:"qiniu"},{label:"亚马逊(S3)",value:"s3"}]},formItemClass:"w-full",rules:"selectRequired"},{component:"Input",componentProps:{placeholder:"1024"},fieldName:"single_limit",label:e.single_limit,formItemClass:"w-full md:w-1/2"},{component:"Input",componentProps:{placeholder:"1024"},fieldName:"total_limit",label:e.total_limit,formItemClass:"w-full md:w-1/2"},{component:"Input",componentProps:{placeholder:"1"},fieldName:"nums",label:e.nums,formItemClass:"w-full md:w-1/2"},{component:"Input",componentProps:{placeholder:""},fieldName:"exclude",label:e.exclude,formItemClass:"w-full md:w-1/2"},{fieldName:"btn",label:"",component:()=>u("div",{class:"flex space-x-2"},[u(g,{type:"primary",onClick:c.bind(null)},{default(){return"保存提交"}}),u(g,{type:"primary",ghost:!0,onClick:n.bind(null)},{default(){return"扩展设置"}})]),componentProps:{},formItemClass:"col-span-1"}]}),[i,m]=A({connectedComponent:I});function c(){s.validate().then(l=>r(this,null,function*(){if(l.valid){const p=yield s.getValues(),h=q(p,["btn"],[],{group_code:"basic_upload_setting"},e);B(h).then(()=>{N.success("保存成功"),t()})}}))}const n=()=>{s.validate().then(l=>r(this,null,function*(){if(l.valid){const p=yield s.getValues();m.setData(p),m.open()}}))},t=()=>r(this,null,function*(){const l=yield V({group_code:"basic_upload_setting"});yield s.setValues(b({},l))});return D(()=>r(this,null,function*(){t()})),(l,p)=>(S(),P(d(z),{"content-class":"flex flex-col gap-4"},{default:R(()=>[w(d(o)),w(d(i),{ref:"uploadSettingDrawerRef"},null,512)]),_:1}))}});export{T as default};
