var x=Object.defineProperty,S=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var A=(t,a,e)=>a in t?x(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,v=(t,a)=>{for(var e in a||(a={}))B.call(a,e)&&A(t,e,a[e]);if(V)for(var e of V(a))C.call(a,e)&&A(t,e,a[e]);return t},h=(t,a)=>S(t,y(a));var D=(t,a,e)=>new Promise((c,d)=>{var m=s=>{try{i(e.next(s))}catch(o){d(o)}},g=s=>{try{i(e.throw(s))}catch(o){d(o)}},i=s=>s.done?c(s.value):Promise.resolve(s.value).then(m,g);i((e=e.apply(t,a)).next())});import{u as N}from"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{f as k,u as F,a as I,s as U}from"./index-BDWHuWtt.js";import{h as K,b,cK as L,j as M,n as j,u as w,k as z,a6 as P,z as q}from"../jse/index-index-BUCZBWdu.js";import{u as E}from"./use-modal-BGLiGhJB.js";import{aK as G}from"./bootstrap-DBsnWor2.js";import"./component-map-Dg1YW3q5.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";const H={class:"common-form"},J=K({__name:"form",props:{dict_id:{type:[String,Number],default:void 0},dict_code:{type:[String,Number],default:void 0}},setup(t,{expose:a}){const e=t,c=b(),d=b(!1),m=b(),[g,i]=N(v({showDefaultActions:!1},k)),[s,o]=E({draggable:!0,onOpenChange(r){var l,n,u,p,f;d.value=(n=(l=o.getData())==null?void 0:l.isUpdate)!=null?n:!1,c.value=r?((u=o.getData())==null?void 0:u.record)||{}:{},m.value=r?(p=o.getData())==null?void 0:p.gridApi:null,r&&d.value?U((f=c.value)==null?void 0:f.id).then(_=>{i.setValues(_)}):i.setValues(c.value)},onConfirm(){i.validate().then(r=>D(this,null,function*(){var l;if(r.valid){const n=yield i.getValues();o.setState({loading:!0,confirmLoading:!0});const u=!!((l=c.value)!=null&&l.id),p=u?F:I,f=u?[c.value.id,h(v({},n),{dict_id:e.dict_id,code:e.dict_code})]:[h(v({},n),{dict_id:e.dict_id,code:e.dict_code})];p(...f).then(()=>{var _;L.success("保存成功"),(_=m.value)==null||_.reload(),o.close()}).finally(()=>{o.setState({loading:!1,confirmLoading:!1})})}}))}});return a(o),(r,l)=>(j(),M(w(s),{title:d.value?"编辑字典项":"新增字典项",class:"w-[40%]"},{default:z(()=>[P("div",H,[q(w(g))])]),_:1},8,["title"]))}}),ae=G(J,[["__scopeId","data-v-8de8ac95"]]);export{ae as default};
