var C=Object.defineProperty;var u=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var d=(l,e,o)=>e in l?C(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,f=(l,e)=>{for(var o in e||(e={}))P.call(e,o)&&d(l,o,e[o]);if(u)for(var o of u(e))h.call(e,o)&&d(l,o,e[o]);return l};var p=(l,e,o)=>new Promise((r,n)=>{var m=a=>{try{s(o.next(a))}catch(i){n(i)}},t=a=>{try{s(o.throw(a))}catch(i){n(i)}},s=a=>a.done?r(a.value):Promise.resolve(a.value).then(m,t);s((o=o.apply(l,e)).next())});import{u as b}from"./form-CnpKYFzH.js";import{t as _}from"./index-D2w77Msk.js";import{h as I,J as c,dk as g,cK as N,dl as S,y as T,j as M,n as v,k as F,z as k,u as w}from"../jse/index-index-BUCZBWdu.js";import{aY as x,aZ as y,B}from"./bootstrap-DBsnWor2.js";import{_ as V}from"./page.vue_vue_type_script_setup_true_lang-9XYPEXDE.js";import"./vxe-table-DN_3U_z_.js";import"./component-map-Dg1YW3q5.js";const j=I({__name:"email-setting",setup(l){const e={Host:"SMTP服务器",Port:"SMTP端口",Username:"SMTP用户名",Password:"SMTP密码",SMTPSecure:"SMTP验证方式",From:"默认发件人",FromName:"默认发件人名称",email:"测试地址"},[o,r]=b({handleSubmit:n,layout:"horizontal",wrapperClass:"grid-cols-1 md:grid-cols-1 lg:grid-cols-1",commonConfig:{labelWidth:120},resetButtonOptions:{show:!1},submitButtonOptions:{show:!1},schema:[{fieldName:"Host",label:e.Host,component:"Input",componentProps:{placeholder:"",allowClear:!0},formItemClass:"w-full md:w-1/2",rules:"required"},{fieldName:"Port",label:e.Port,component:"Input",componentProps:{placeholder:"请输入站点名称",allowClear:!0},formItemClass:"w-full md:w-1/2",rules:"required"},{fieldName:"Username",label:e.Username,component:"Input",componentProps:{placeholder:""},formItemClass:"w-full md:w-1/2"},{fieldName:"Password",label:e.Password,component:"Input",componentProps:{placeholder:"",allowClear:!0},formItemClass:"w-full md:w-1/2"},{fieldName:"SMTPSecure",label:e.SMTPSecure,component:"RadioGroup",defaultValue:"ssl",componentProps:{options:[{label:"ssl",value:"ssl"},{label:"tsl",value:"tsl"}]},formItemClass:"w-full md:w-1/2",rules:"selectRequired"},{fieldName:"From",label:e.From,component:"Input",componentProps:{placeholder:"",allowClear:!0},formItemClass:"w-full md:w-1/2"},{fieldName:"FromName",label:e.FromName,component:"Input",componentProps:{placeholder:"",allowClear:!0},formItemClass:"w-full md:w-1/2"},{fieldName:"email",label:e.email,component:"Input",componentProps:{placeholder:"",allowClear:!0},renderComponentContent:t=>({addonAfter:()=>c(y,{title:"发送测试邮件",placement:"right"},{default:()=>c(x,{onClick(){console.log("发起测试邮件")}})})}),formItemClass:"w-full md:w-1/2"},{fieldName:"btn",label:"",component:()=>c("div",{class:"flex space-x-2"},[c(B,{type:"primary",onClick:n.bind(null)},{default(){return"保存提交"}})]),componentProps:{},formItemClass:"col-span-1"}]});function n(){r.validate().then(t=>p(this,null,function*(){if(t.valid){const s=yield r.getValues(),a=_(s,["btn","email"],[],{group_code:"email_setting"},e);g(a).then(()=>{N.success("保存成功"),m()})}}))}const m=()=>p(this,null,function*(){const t=yield S({group_code:"email_setting"});yield r.setValues(f({},t))});return T(()=>p(this,null,function*(){m()})),(t,s)=>(v(),M(w(V),{"content-class":"flex flex-col gap-4"},{default:F(()=>[k(w(o))]),_:1}))}});export{j as default};
