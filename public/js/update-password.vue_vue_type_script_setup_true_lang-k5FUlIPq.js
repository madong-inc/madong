var i=(c,n,e)=>new Promise((t,o)=>{var l=a=>{try{s(e.next(a))}catch(p){o(p)}},r=a=>{try{s(e.throw(a))}catch(p){o(p)}},s=a=>a.done?t(a.value):Promise.resolve(a.value).then(l,r);s((e=e.apply(c,n)).next())});import{u as d}from"./form-CnpKYFzH.js";import{b as f}from"./user-Cu6cmzRD.js";import{s as m,B as w}from"./bootstrap-DBsnWor2.js";import{h,b as g,J as u,cK as _,j as b,n as C,u as I}from"../jse/index-index-BUCZBWdu.js";const F=h({__name:"update-password",setup(c,{expose:n}){const e=g(!1),[t,o]=d({wrapperClass:"grid-cols-1 w-[60%]",commonConfig:{formItemClass:"col-span-1",labelWidth:100},showDefaultActions:!1,submitButtonOptions:{content:"更新信息"},resetButtonOptions:{show:!1},schema:[{fieldName:"password",label:"旧密码",component:"InputPassword",componentProps:{placeholder:"请输入旧密码"},formItemClass:"col-span-1",rules:"required"},{fieldName:"new_password",label:"新密码",help:"5-18位数字、字母、特殊字符组成。",component:"InputPassword",componentProps:{placeholder:"请输入新密码"},formItemClass:"col-span-1",rules:m().regex(/[\w!@#$%^&*]{5,18}/,"密码由5-18位数字、字母、特殊字符组成。")},{fieldName:"confirm_password",label:"确认密码",help:"5-18位数字、字母、特殊字符组成。",component:"InputPassword",componentProps:{placeholder:"请输入确认密码"},formItemClass:"col-span-1",rules:m().regex(/[\w!@#$%^&*]{5,18}/,"密码由5-18位数字、字母、特殊字符组成。"),dependencies:{triggerFields:["confirm_password"],rules:r=>m().regex(/[\w!@#$%^&*]{5,18}/,"密码由5-18位数字、字母、特殊字符组成。").refine(s=>s===r.new_password,{message:"确认密码必须与密码一致"})}},{fieldName:"btn",label:"",component:()=>u("div",{},u(w,{type:"primary",onClick:l.bind(null),loading:e.value},{default(){return"修改密码"}})),componentProps:{},formItemClass:"col-span-1"}]}),l=()=>{o.validate().then(r=>i(this,null,function*(){if(r.valid){const s=yield o.getValues();e.value=!0,f(s).then(()=>{_.success("保存成功"),o.resetForm()}).finally(()=>{e.value=!1})}}))};return n({getFormApi(){return o}}),(r,s)=>(C(),b(I(t)))}});export{F as _};
