var N=Object.defineProperty,R=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var C=(o,e,t)=>e in o?N(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,f=(o,e)=>{for(var t in e||(e={}))A.call(e,t)&&C(o,t,e[t]);if(v)for(var t of v(e))B.call(e,t)&&C(o,t,e[t]);return o},b=(o,e)=>R(o,z(e));var k=(o,e,t)=>new Promise((d,r)=>{var _=n=>{try{u(t.next(n))}catch(s){r(s)}},g=n=>{try{u(t.throw(n))}catch(s){r(s)}},u=n=>n.done?d(n.value):Promise.resolve(n.value).then(_,g);u((t=t.apply(o,e)).next())});import"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{g as x,b as I,d as O,l as T}from"./index-BDWHuWtt.js";import{_ as D}from"./table-action.vue_vue_type_script_setup_true_lang-Bo6k7XMX.js";import V from"./detail-CepzxrOz.js";import j from"./form-BslTGa0r.js";import{_ as E}from"./page.vue_vue_type_script_setup_true_lang-9XYPEXDE.js";import{B as G,a3 as U}from"./bootstrap-DBsnWor2.js";import{h as $,b as h,j as q,n as K,u as c,k as m,z as l,Z as P,cK as Z}from"../jse/index-index-BUCZBWdu.js";import{u as H}from"./use-vxe-grid-CxZE6Hzc.js";const at=$({__name:"index",props:{dict_id:{type:[String,Number],default:void 0},dict_code:{type:[String,Number],default:void 0}},setup(o){const e=o,t=h(!1),d=h(),r=h(),_=b(f({},I),{collapsed:!0}),g=b(f({},x),{toolbarConfig:b(f({},x.toolbarConfig),{slots:{buttons:"toolbar-buttons"},custom:{icon:"vxe-icon-menu"}}),height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(p,dt)=>k(this,[p,dt],function*({page:i},a){return yield T(b(f({page:i.currentPage,limit:i.pageSize},a),{dict_id:e.dict_id}))})}}}),u={checkboxChange(i){t.value=i.records.length>0}},[n,s]=H({formOptions:_,gridOptions:g,gridEvents:u}),F=()=>{d.value.setData({isUpdate:!1,gridApi:s}),d.value.open()},S=i=>{d.value.setData({record:i,isUpdate:!0,gridApi:s}),d.value.open()},w=i=>{r.value.setData({record:i}),r.value.open()},y=i=>{let a=[];i?a.push(i.id):a=s.grid.getCheckboxRecords().map(p=>p.id),O(0,{data:a}).then(()=>{Z.success("删除成功"),s.reload()})};return(i,a)=>(K(),q(c(E),{"auto-content-height":""},{default:m(()=>[l(c(n),null,{"toolbar-buttons":m(()=>[l(c(D),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["admin","system:dict_item:save"],onClick:F.bind(null)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",ifShow:t.value,auth:["admin","system:dict_item:remove"],popConfirm:{title:"确定删除吗？",confirm:y.bind(null,!1)}}]},{more:m(()=>[l(c(G),{style:{"margin-left":"8px"}},{default:m(()=>[a[0]||(a[0]=P(" 批量操作 ")),l(c(U))]),_:1})]),_:1},8,["actions","drop-down-actions"])]),"toolbar-tools":m(()=>a[1]||(a[1]=[])),ACTION:m(({row:p})=>[l(c(D),{actions:[{label:"详情",type:"link",size:"small",auth:["admin","system:dict_item:detail"],onClick:w.bind(null,p)},{label:"编辑",type:"link",size:"small",auth:["admin","system:dict_item:update"],onClick:S.bind(null,p)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["admin","system:dict_item:remove"],popConfirm:{title:"确定删除吗？",confirm:y.bind(null,p)}}]},null,8,["actions","drop-down-actions"])]),_:1}),l(j,{ref_key:"dictItemFormRef",ref:d,dict_id:o.dict_id,dict_code:o.dict_code},null,8,["dict_id","dict_code"]),l(V,{ref_key:"detailFormRef",ref:r},null,512)]),_:1}))}});export{at as _};
