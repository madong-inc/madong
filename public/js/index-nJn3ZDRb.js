var w=Object.defineProperty,A=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var _=(n,t,e)=>t in n?w(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,u=(n,t)=>{for(var e in t||(t={}))z.call(t,e)&&_(n,e,t[e]);if(C)for(var e of C(t))B.call(t,e)&&_(n,e,t[e]);return n},b=(n,t)=>A(n,S(t));var x=(n,t,e)=>new Promise((d,f)=>{var g=o=>{try{m(e.next(o))}catch(p){f(p)}},h=o=>{try{m(e.throw(o))}catch(p){f(p)}},m=o=>o.done?d(o.value):Promise.resolve(o.value).then(g,h);m((e=e.apply(n,t)).next())});import"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{g as v,d as O,b as T,l as V}from"./index-2Q6mgFBp.js";import{_ as D}from"./table-action.vue_vue_type_script_setup_true_lang-Bo6k7XMX.js";import N from"./detail-DhWxPnKp.js";import j from"./form-DoVbgXZ5.js";import{B as E,a3 as G}from"./bootstrap-DBsnWor2.js";import{_ as P}from"./page.vue_vue_type_script_setup_true_lang-9XYPEXDE.js";import{h as U,b as k,j as $,n as q,k as r,z as i,u as l,Z as I,cK as K}from"../jse/index-index-BUCZBWdu.js";import{u as Z}from"./use-vxe-grid-CxZE6Hzc.js";import"./component-map-Dg1YW3q5.js";import"./index-1NUgD4WV.js";import"./Dropdown-G0jIiXp0.js";import"./description.vue_vue_type_script_setup_true_lang-CrOvFWHr.js";import"./index-BWzmO9nj.js";import"./use-modal-BGLiGhJB.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";const pe=U({__name:"index",setup(n){const t=k(!1),e=k(),d=k(),f=b(u({},T),{collapsed:!0}),g=b(u({},v),{toolbarConfig:b(u({},v.toolbarConfig),{slots:{buttons:"toolbar-buttons"},custom:{icon:"vxe-icon-menu"}}),height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(c,fe)=>x(this,[c,fe],function*({page:a},s){return yield V(u({page:a.currentPage,limit:a.pageSize},s))})}}}),h={checkboxChange(){const a=o.grid.getCheckboxRecords();t.value=a.length>0},checkboxAll(){const a=o.grid.getCheckboxRecords();t.value=a.length>0}},[m,o]=Z({formOptions:f,gridOptions:g,gridEvents:h}),p=()=>{e.value.setData({isUpdate:!1,gridApi:o}),e.value.open()},F=a=>{e.value.setData({record:a,isUpdate:!0,gridApi:o}),e.value.open()},R=a=>{d.value.setData({record:a}),d.value.open()},y=a=>{let s=[];a?s.push(a.id):s=o.grid.getCheckboxRecords().map(c=>c.id),O(0,{data:s!=null?s:[]}).then(()=>{K.success("删除成功"),o.reload()})};return(a,s)=>(q(),$(l(P),{"auto-content-height":""},{default:r(()=>[i(l(m),null,{"toolbar-buttons":r(()=>[i(l(D),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["admin","system:post:save"],onClick:p.bind(null)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",ifShow:t.value,auth:["admin","system:post:remove"],popConfirm:{title:"确定删除吗？",confirm:y.bind(null,!1)}}]},{more:r(()=>[i(l(E),{style:{"margin-left":"8px"}},{default:r(()=>[s[0]||(s[0]=I(" 批量操作 ")),i(l(G))]),_:1})]),_:1},8,["actions","drop-down-actions"])]),"toolbar-tools":r(()=>s[1]||(s[1]=[])),ACTION:r(({row:c})=>[i(l(D),{actions:[{label:"详情",type:"link",size:"small",auth:["admin","system:post:detail"],onClick:R.bind(null,c)},{label:"编辑",type:"link",size:"small",auth:["admin","system:post:update"],onClick:F.bind(null,c)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["admin","system:post:remove"],popConfirm:{title:"确定删除吗？",confirm:y.bind(null,c)}}]},null,8,["actions","drop-down-actions"])]),_:1}),i(j,{ref_key:"postFormRef",ref:e},null,512),i(N,{ref_key:"detailFormRef",ref:d},null,512)]),_:1}))}});export{pe as default};
