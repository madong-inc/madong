var b=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var V=(s,t,a)=>t in s?b(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,A=(s,t)=>{for(var a in t||(t={}))w.call(t,a)&&V(s,a,t[a]);if(h)for(var a of h(t))x.call(t,a)&&V(s,a,t[a]);return s};var D=(s,t,a)=>new Promise((r,n)=>{var v=e=>{try{c(a.next(e))}catch(o){n(o)}},i=e=>{try{c(a.throw(e))}catch(o){n(o)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(v,i);c((a=a.apply(s,t)).next())});import{u as C}from"./form-CnpKYFzH.js";import"./vxe-table-DN_3U_z_.js";import{u as k,a as B,s as F}from"./dict-DHmWue44.js";import{f as S}from"./index-9S9tzr0-.js";import{h as y,b as _,u as g,cK as K,j as L,n as M,k as N,a6 as U,z as j}from"../jse/index-index-BUCZBWdu.js";import{u as z}from"./use-modal-BGLiGhJB.js";import{aK as I}from"./bootstrap-DBsnWor2.js";import"./component-map-Dg1YW3q5.js";import"./x-BAo__qRZ.js";import"./loading-BKAGElNW.js";const P={class:"common-form"},q=y({__name:"form",setup(s,{expose:t}){const a=_(),r=_(!1),n=_(),[v,i]=C(A({showDefaultActions:!1},S)),[c,e]=z({draggable:!0,onOpenChange(o){var l,m,u,d,f;r.value=(m=(l=e.getData())==null?void 0:l.isUpdate)!=null?m:!1,a.value=o?((u=e.getData())==null?void 0:u.record)||{}:{},n.value=o?(d=e.getData())==null?void 0:d.gridApi:null,o&&r.value?F((f=a.value)==null?void 0:f.id).then(p=>{i.setValues(p)}):i.setValues(a.value)},onConfirm(){i.validate().then(o=>D(this,null,function*(){var l,m;if(o.valid){const u=yield i.getValues();e.setState({loading:!0,confirmLoading:!0});const d=(l=a.value)!=null&&l.id?k:B,f=g(r)?[(m=a.value)==null?void 0:m.id,u]:[u];d(...f).then(()=>{var p;K.success("保存成功"),(p=n.value)==null||p.reload(),e.close()}).finally(()=>{e.setState({loading:!1,confirmLoading:!1})})}}))}});return t(e),(o,l)=>(M(),L(g(c),{title:r.value?"编辑字典":"新增字典",class:"w-[50%]"},{default:N(()=>[U("div",P,[j(g(v))])]),_:1},8,["title"]))}}),$=I(q,[["__scopeId","data-v-0eda1cf3"]]);export{$ as default};
